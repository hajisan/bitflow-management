<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Project With SubProjects</title>
</head>
<body>
<h1>Subprojekter til projekt</h1>

<!-- Kort info om projektet -->
<section class="mini-info">
  <div>Navn: <span th:text="${projectWithSubProjects.project.name}"></span></div>
  <div>Deadline: <span th:text="${projectWithSubProjects.project.deadline}"></span></div>
  <div>Aktuelt tidsforbrug: <span th:text="${projectWithSubProjects.project.timeSpent} + ' timer'"></span></div>

</section>

<!-- Kort info om subprojekter -->
<section class="mini-info">
  <div th:if="${!#lists.isEmpty(projectWithSubProjects.subProjectList)}">
    <div th:each="subproject : ${projectWithSubProjects.subProjectList}" class="list">
      <div>Navn: <span th:text="${subproject.name}"></span></div>
      <div>Deadline: <span th:text="${subproject.deadline}"></span></div>
      <div>Status: <span th:text="${subproject.status}"></span></div>
      <div>
        <a th:href="@{/subprojects/{id}(id=${subproject.subProjectId})}">
          <button>Se detaljer</button>
        </a>
      </div>
      <hr />
    </div>
  </div>

  <!-- Hvis der ingen subprojekter er -->
  <div th:if="${#lists.isEmpty(projectWithSubProjects.subProjectList)}">
    Projektet har ingen tilknyttede subprojekter.
  </div>

</section>

<!-- Opret subproject er kun for admin og projektleder -->
<section class="form-actions"
         th:if="${session.currentUser.role.name() == 'PROJECT_MANAGER' || session.currentUser.role.name() == 'ADMIN'}">
  <div>
    <a th:href="@{/subprojects/create(projectId=${projectWithSubProjects.project.projectId})}">
      <button>Opret subprojekt</button>
    </a>
  </div>
</section>


<!-- Navigation -->
<section class="navigation">

<!-- Tilbage-knap til project-detail.html er for alle -->
  <a th:href="@{/projects/{id}(id=${projectWithSubProjects.project.projectId})}"></a>
<!-- Tilbage til front-page.html er for alle -->
  <a th:href="@{/users/profile}">Tilbage til forside</a>
</section>


</body>
</html>