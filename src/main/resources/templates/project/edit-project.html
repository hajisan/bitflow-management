<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Edit Project</title>
</head>

<body>

<h1>Rediger Projekt</h1>

<!-- Fejlbesked -->
<section th:if="${error}" class="error-section">
  <p th:text="${error}" class="error-message"></p>
</section>


  <!-- Vis logget ind bruger og rolle -->

<!--                                  DEN SKAL NOK VÆK
<section class="user-info">
  <p th:if="${session.currentUser != null}">
    Du er logget ind som <span th:text="${session.currentUser.role}"></span>
  </p>
</section> -->


<!-- Formular til redigering af projekt -->
<section class="form-actions">
  <form th:action="@{/projects/update}" th:object="${project}" method="post" class="form-fields">
    <input type="hidden" th:field="*{projectId}" />

    <div>
      <label for="name">Navn:</label>
      <input id="name" type="text" th:field="*{name}" required />
    </div>

    <div>
      <label for="description">Beskrivelse:</label>
      <textarea id="description" th:field="*{description}"></textarea>
    </div>

    <div>
      <label for="deadline">Deadline:</label>
      <input id="deadline" type="date" th:field="*{deadline}" />
    </div>

    <div>
      <label for="estimatedTime">Estimeret tid (timer):</label>
      <input id="estimatedTime" type="number" th:field="*{estimatedTime}" min="0" />
    </div>

    <div>
      <label for="status">Status:</label>
      <select id="status" th:field="*{status}">
        <option value="ACTIVE">Aktiv</option>
        <option value="INACTIVE">Inaktiv</option>
        <option value="DONE">Færdig</option>
      </select>
    </div>

    <div class="form-actions">
      <button type="submit">Opdater</button>
    </div>
  </form>
</section>

<!-- Slet projekt -->
<section class="delete">
  <form th:action="@{/projects/delete/{projectId}(projectId=${project.projectId})}" method="post">
    <button type="submit" onclick="return confirm('Er du sikker på, at du vil slette denne opgave?')">Slet</button>
  </form>
</section>

<!-- Navigation -->
<section class="navigation">

  <!-- Fuld projektliste kun for admin: project-list.html -->
  <a th:if="${session.currentUser.role.name() == 'ADMIN'}"
     th:href="@{/projects/list}">
    Tilbage til projektliste
  </a>

  <!-- Profilside for admin og projektleder: front-page.html -->
  <a th:href="@{/users/profile}">Tilbage til forside</a>
</section>

</body>
</html>