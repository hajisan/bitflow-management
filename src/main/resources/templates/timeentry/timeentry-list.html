<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>TimeEntry List</title>
</head>
<body>

<h1>Liste af alle tidsregistreringer</h1>

<!-- Fejl-/succesbesked -->
<section th:if="${error}" class="error-section">
    <p th:text="${error}" class="error-message"></p>
</section>
<section th:if="${success}" class="success-section">
    <p th:text="${success}" class="success-message"></p>
</section>

<!-- Kun ADMIN må se timeentry-liste -->
<section th:if="${session.currentUser.role.name() == 'ADMIN'}" class="mini-info">
    <div th:each="entry : ${timeentries}" class="list">

        <div>ID: <span th:text="${entry.timeId}"></span></div>
        <div>Tidsforbrug: <span th:text="${entry.hoursSpent}"></span></div>
        <div>Dato: <span th:text="${entry.date}"></span></div>

        <div>
            <a th:href="@{/timeentries/{id}(id=${entry.timeId})}">
                <button>Se detaljer</button>
            </a>
            <a th:href="@{/timeentries/edit/{id}(id=${entry.timeId})}">
                <button>Rediger</button>
            </a>
            <form th:action="@{/timeentries/delete/{id}(id=${entry.timeId})}" method="post" style="display:inline">
                <button type="submit" onclick="return confirm('Er du sikker på, at du vil slette denne tidsregistrering?')">Slet</button>
            </form>
        </div>

        <hr/>
    </div>
</section>

<!-- Hvis en anden rolle forsøger at tilgå -->
<section th:unless="${session.currentUser.role.name() == 'ADMIN'}">
    <p>Du har ikke adgang til denne side.</p>
</section>

<!-- Navigation -->
<section class="navigation">
    <div>
        <a th:href="@{/timeentries/create}">
            <button>Opret ny tidsregistrering</button>
        </a>
    </div>
    <div>
        <a th:href="@{/users/profile}">
            <button>Tilbage til forside</button>
        </a>
    </div>
</section>

</body>
</html>
