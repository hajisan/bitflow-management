<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>SubProject With Users</title>
</head>
<body>
<h1>Delprojektbeskrivelse</h1>

<p>ID: <span th:text="${subProjectWithUsers.subProject.subProjectId}"></span></p>
<p>Navn: <span th:text="${subProjectWithUsers.subProject.name}"></span></p>
<p>Beskrivelse: <span th:text="${subProjectWithUsers.subProject.description}"></span></p>
<p>Deadline: <span th:text="${subProjectWithUsers.subProject.deadline}"></span></p>
<p>Status: <span th:text="${subProjectWithUsers.subProject.status}"></span></p>

<h2>Brugere tilknyttet delprojektet</h2>

<!-- Hvis listen ikke er tom -->
<ul th:if="${!#lists.isEmpty(subProjectWithUsers.userViewDTOList)}">
  <li th:each="user : ${subProjectWithUsers.userViewDTOList}">
    <span th:text="${user.firstName + ' ' + user.lastName + ' (' + user.role + ')'}"></span>
  </li>
</ul>

<!-- Hvis listen er tom -->
<p th:if="${#lists.isEmpty(subProjectWithUsers.userViewDTOList)}">
  Der er ingen brugere tilknyttet dette delprojekt.
</p>

<!-- Tilknyt brugere til subprojekt -->
<h2>Tildel nye brugere</h2>

<form th:action="@{'/subprojects/' + ${subProjectWithUsers.subProject.subProjectId} + '/assignusers'}"
      method="post">

    <label for="user-select">Vælg én eller flere brugere:</label><br/>
    <select name="userIds" multiple size="5" id="user-select">
        <option th:each="user : ${unassignedUsers}"
                th:value="${user.userId}"
                th:text="${user.firstName + ' ' + user.lastName + ' (' + user.role + ')'}">
        </option>
    </select>

    <br/><br/>
    <button type="submit">Tildel valgte brugere</button>
</form>

<a th:href="@{/subprojects/list}">Tilbage til delprojektoversigt</a>
</body>
</html>